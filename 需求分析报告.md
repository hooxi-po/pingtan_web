# 网络应用综合实践 — 项目需求分析（乡村特色旅游信息系统）

| 字段 | 内容 |
|---|---|
| 题目 | 乡村特色旅游信息系统 |
| 小组成员 | 刘剑涛、周豪、吴铭锋（班级/学号：待补充） |
| 提交日期 | 2025 年 9 月 8 日 |

---

## 1. 项目概述

### 1.1 项目背景、目的和意义
#### 1.1.1 项目背景
- 乡村旅游愈发注重“在地文化与生态体验”，但信息分散在传统门户、短视频与地图 POI 中，用户难以形成“目的地—路线—吃住—活动”的一体化决策路径。
- 地方政府与文旅机构有推广诉求，但缺少一体化“内容运营 + 数据洞察 + 智能推荐”的工具，导致供需两端信息不匹配。

#### 1.1.2 项目目的
- 为游客提供一站式目的地信息、地图检索、路线可视化、行程管理与美食/住宿推荐，降低决策与出行成本。
- 为内容运营提供资讯发布与基础数据看板，提升宣推效率与供给侧调度能力。

#### 1.1.3 项目意义
- 促进地方文旅资源数字化与结构化，助力乡村特色品牌传播。
- 通过可持续的技术架构与数据模型，为后续智慧文旅应用（如更细致的推荐/票务/活动预约）打下基础。

### 1.2 项目现状（文献综述节选）
- 行业现状：互联网平台（OTA、UGC 社区、地图）已形成用户心智，但“本地化、低成本、可运营”的目的地官网/小站仍有价值。
- 研究趋势：POI 推荐、行程规划、多目标优化与可视化逐步结合，轻量 AI 能力用于摘要与草案生成。
- 本项目定位：以 Web 端为主、可快速部署与试运行的目的地信息系统，强调可操作性与落地效率。

---

## 1.3 项目要解决的问题及拟采用的方法
### 1.3.1 项目要解决的问题（业务范围）
- 信息聚合：将景点、餐饮、民宿与资讯统一结构化展示与检索。
- 决策支持：基于地图的附近探索、路线基础可视化、行程按天管理。
- 运营支撑：资讯发布、基础数据收集与用户互动（收藏/点赞）。
- 性能与 SEO：关键页 SSR，内容页 SSG/ISR，提高可见度与可用性。

### 1.3.2 项目技术架构与技术选型
- 架构：B/S 架构；Next.js App Router 作为前后端一体化的 BFF；SSR + SSG/ISR 混合渲染；Vercel/Serverless 部署。
- 前端：Next.js 15 + TypeScript；Tailwind CSS + shadcn/ui；next-intl（i18n）；React Context；Jest + Testing Library。
- 后端：Node.js 18+；Next.js API Routes；Prisma + PostgreSQL；NextAuth（认证）。
- 第三方服务：百度地图 JS API（主）+ Google Maps（备）；Gemini（AI 辅助）。
- 选型理由：SSR/SEO 友好、工程效率高（TS+Tailwind+shadcn/ui）、ORM 体验好（Prisma）、一体化部署（Vercel），本地化地图适配强。

---

## 1.4 项目分工
| 成员 | 角色 | 主要职责 |
|---|---|---|
| 刘剑涛 | 组长/全栈（偏后端） | 需求澄清、数据库与 API、认证/权限、部署与环境、质量门槛与测试 |
| 周豪 | 前端负责人 | IA 与路由、核心用户流、UI 组件封装、地图集成、i18n、可访问性 |
| 吴铭锋 | 数据/测试/文档 | 数据采集与清洗、资讯运营、测试计划与用例、CI 执行、文档与知识库 |

备注：重大需求与合并前双人评审；三人互为备份。

---

## 1.5 项目进度安排（12–16 周试运行目标）
| 阶段 | 时间 | 目标与交付物 |
|---|---|---|
| 需求分析 | 第 1 周 | 范围与角色定义、核心流程草图、验收标准（DoD） |
| 概要设计 | 第 2–3 周 | 信息架构、数据模型（ER）、接口草案、UI/组件清单 |
| 详细设计 | 第 4–5 周 | 详细接口契约、权限矩阵、监控与指标、测试方案 |
| 开发实现 | 第 6–9 周 | 景点/地图/行程/资讯/认证等核心功能与页面 |
| 测试与优化 | 第 10–11 周 | 功能/接口/性能/安全测试，Bug 收敛与优化 |
| 集成与部署 | 第 12–12+ 周 | 运营后台与告警、灰度上线、试运行与问题闭环 |
| 可选增强 | 第 13–16 周 | AI 行程草案、i18n 扩展、分享/导出 |

---

## 1.6 完成项目已具备的条件
### 1.6.1 技术知识储备情况
- 前端：React/Next.js、TypeScript、Tailwind、shadcn/ui、App Router。
- 后端/数据：API 设计、Prisma ORM、PostgreSQL、索引与优化意识。
- 认证/安全：NextAuth、常见 Web 安全（XSS/CORS/Headers）。
- 测试：Jest、Testing Library，初始覆盖率阈值 70%。
- 地图与位置：百度地图 JS API、POI/天气；Google Maps Loader 基础。
- 部署：Vercel、Docker（可选）。

### 1.6.2 开发工具与环境的安装、部署情况
- VS Code/Trae IDE、ESLint/Prettier、Node.js 18+、npm。
- PostgreSQL、Prisma CLI；Git 与 Vercel 账号；环境变量规范（数据库、认证、地图/AI）。

### 1.6.3 相关案例查阅情况
- 同类产品：OTA/UGC 平台与目的地官网的对标梳理。
- 技术案例：Next.js 官方示例（App Router/SEO/i18n）、Prisma schema 设计、Vercel 最佳实践。
- 学术/行业：POI 推荐、行程规划、多目标优化与可视化等综述。

---

## 1.7 项目预算（可上线试运行口径）
| 成本项 | 规格/说明 | 月度估算 | 年度估算 |
|---|---|---:|---:|
| 域名 | .com/.cn 等 | 8–12 | 80–120 |
| 部署/托管 | Vercel 免费层起步；若升级 100–300/月 | 0–300 | 0–3600 |
| 数据库 | Neon/Supabase 免费层起步；升级 100–300/月 | 0–300 | 0–3600 |
| 地图 API | 免费配额通常足够；超额 50–300/月 | 0–300 | 0–3600 |
| AI（可选） | Gemini 超配额备用 100–500/月 | 0–500 | 0–6000 |
| 监控日志（可选） | Sentry/自建 | 0–200 | 0–2400 |
| 其他杂项 | 证书/备份/存储等 | 0–200 | 0–2400 |
- 试运行起步：0–300 元/月即可落地；小规模流量：约 200–1,200 元/月；年度 2,400–10,000 元参考。

---

## 1.8 预计开发过程可能遇到的困难及预防措施
- 技术：地图/路线策略复杂度与配额限制（渐进增强、缓存、退化方案）；SEO/性能（SSR 关键页、懒加载、指标红线）；数据一致性（迁移、命名与索引规范、灰度发布）；认证与权限（中间件、限流、来源校验）。
- 协作：范围蔓延（里程碑+冻结期）；质量（分支策略、PR 模板、Lint/测试门槛、双人 Review）；知识传递（知识库沉淀与接口契约）。
- 合规：隐私保护与地图数据协议遵循；不采集敏感个人信息，行为数据匿名化/脱敏。

---

## 1.9 参考文献（GB/T 7714-2015）

[1] Vercel (2024). Next.js 15 App Router Guide [EB/OL]. 2024 [2025-09-12]. https://nextjs.org/docs.
[2] Prisma Data, Inc. (2024). Prisma ORM with PostgreSQL [EB/OL]. 2024 [2025-09-12]. https://www.prisma.io/docs.
[3] The PostgreSQL Global Development Group (2024). PostgreSQL 14 Documentation [EB/OL]. 2024 [2025-09-12]. https://www.postgresql.org/docs/.
[4] Auth.js Community (2024). NextAuth.js Documentation [EB/OL]. 2024 [2025-09-12]. https://authjs.dev/.
[5] Tailwind Labs (2024). Tailwind CSS Documentation [EB/OL]. 2024 [2025-09-12]. https://tailwindcss.com/docs.
[6] shadcn (2024). shadcn/ui Documentation [EB/OL]. 2024 [2025-09-12]. https://ui.shadcn.com/.
[7] 百度地图开放平台 (2024). 百度地图开放平台文档 [EB/OL]. 2024 [2025-09-12]. https://lbsyun.baidu.com/.
[8] Google (2024). Google Maps Platform Documentation [EB/OL]. 2024 [2025-09-12]. https://developers.google.com/maps.
[9] Google (2024). Gemini API Documentation [EB/OL]. 2024 [2025-09-12]. https://ai.google.dev/.
[10] Vercel (2024). Next.js on Vercel Best Practices [EB/OL]. 2024 [2025-09-12]. https://vercel.com/docs.
[11] Ricci F, Rokach L, Shapira B (2022). Recommender Systems Handbook. 3rd ed. [M]. Cham: Springer. doi:10.1007/978-1-0716-2197-4.
[12] Lu J, Wu D, Mao M, Wang W, Zhang G (2015). Recommender system application developments: A survey [J]. Decision Support Systems, 74: 12-32. doi:10.1016/j.dss.2015.03.008.
[13] Yin H, Zhou X, Shao Y, Wang H, Sadiq S (2015). Joint modeling of user check-in behaviors for point-of-interest recommendation [C]// Proceedings of the 24th ACM International Conference on Information and Knowledge Management (CIKM 2015). Melbourne, Australia: ACM, 1631-1640. doi:10.1145/2806416.2806500.
[14] ISO/IEC (2011). ISO/IEC 25010:2011 Systems and software engineering — Systems and software Quality Requirements and Evaluation (SQuaRE) — System and software quality models [S/OL]. Geneva: International Organization for Standardization, 2011 [2025-09-12]. https://www.iso.org/standard/35733.html.

---

## 2. 系统需求分析

### 2.1 业务功能需求
- 角色
  - 访客：浏览景点/资讯、检索、地图查看与筛选。
  - 注册用户：登录/登出、收藏/点赞、创建与管理个人行程。
  - 管理员：内容管理（景点/餐饮/民宿/行程模板/资讯）、运营与数据洞察。
- 核心功能
  - 用户与权限：注册/登录、个人信息、会话管理。
  - 景点信息：列表/详情（图片、开放时间、票价、位置、标签、人气、预计时长等），筛选与排序。
  - 地图与检索：关键字/类别 POI 搜索、附近探索、地图可视化。
  - 路线规划：起终点选择与基础策略（步行/驾车），结果可视化与分享。
  - 行程管理：行程按天与顺序管理（添加/排序/备注/复制），基础预算提示。
  - 美食与住宿：餐厅/民宿列表与详情，关联“附近景点”推荐。
  - 资讯模块：旅游新闻/活动公告发布与浏览。
  - 互动行为：收藏、点赞、浏览记录，用于个性化与统计。

### 2.2 非功能需求（含指标）
- 性能：LCP ≤ 2.5s（P75），TTFB ≤ 500ms（SSR 页）；API P95 ≤ 800ms；列表分页与懒加载；地图资源按需加载与缓存。
- 安全：NextAuth 标准流程与强密码；CORS/CSRF/限流；敏感数据不落日志；安全响应头策略。
- 可扩展/可维护：API 分层与域模型清晰；Prisma 迁移；统一命名/索引规范；测试覆盖率 ≥ 70%；前后端监控与慢查询跟踪。

### 2.3 用例图（SVG，附说明）

<svg width="760" height="420" viewBox="0 0 760 420" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="系统用例图">
  <defs>
    <style>
      .actor { font: 14px sans-serif; }
      .usecase { fill:#fff; stroke:#333; }
      .title { font: 16px sans-serif; font-weight:700; }
      .label { font: 12px sans-serif; }
      .line { stroke:#555; stroke-width:1.2; }
    </style>
  </defs>
  <text x="20" y="28" class="title">乡村特色旅游信息系统 — 用例图</text>

  <!-- Actors -->
  <circle cx="70" cy="110" r="24" fill="#f2f2f2" stroke="#333"/>
  <text x="40" y="155" class="actor">访客</text>
  <circle cx="70" cy="220" r="24" fill="#f2f2f2" stroke="#333"/>
  <text x="30" y="265" class="actor">注册用户</text>
  <circle cx="70" cy="330" r="24" fill="#f2f2f2" stroke="#333"/>
  <text x="35" y="375" class="actor">管理员</text>

  <!-- System boundary -->
  <rect x="180" y="60" width="540" height="320" fill="#fafafa" stroke="#333" rx="8"/>
  <text x="190" y="82" class="label">系统边界</text>

  <!-- Use cases -->
  <ellipse class="usecase" cx="320" cy="120" rx="110" ry="28"/>
  <text x="250" y="125" class="label">浏览/检索景点与资讯</text>

  <ellipse class="usecase" cx="520" cy="120" rx="110" ry="28"/>
  <text x="470" y="125" class="label">地图查看与附近探索</text>

  <ellipse class="usecase" cx="320" cy="200" rx="110" ry="28"/>
  <text x="270" y="205" class="label">用户登录/注册</text>

  <ellipse class="usecase" cx="520" cy="200" rx="120" ry="28"/>
  <text x="455" y="205" class="label">行程创建/编辑/排序</text>

  <ellipse class="usecase" cx="320" cy="280" rx="110" ry="28"/>
  <text x="275" y="285" class="label">收藏/点赞/浏览记录</text>

  <ellipse class="usecase" cx="520" cy="280" rx="120" ry="28"/>
  <text x="480" y="285" class="label">路线规划与可视化</text>

  <ellipse class="usecase" cx="420" cy="350" rx="150" ry="28"/>
  <text x="330" y="355" class="label">内容管理（景点/餐饮/民宿/资讯）</text>

  <!-- Associations -->
  <line class="line" x1="94" y1="110" x2="210" y2="110"/>
  <line class="line" x1="94" y1="110" x2="410" y2="120"/>

  <line class="line" x1="94" y1="220" x2="210" y2="200"/>
  <line class="line" x1="94" y1="220" x2="410" y2="200"/>
  <line class="line" x1="94" y1="220" x2="210" y2="280"/>
  <line class="line" x1="94" y1="220" x2="410" y2="280"/>

  <line class="line" x1="94" y1="330" x2="270" y2="350"/>
</svg>

图示说明：
- 访客可进行内容浏览与地图查看；注册用户在此基础上可进行行程管理与互动；管理员负责内容运营与配置。
- 路线规划属于浏览/地图用例的扩展；收藏/点赞依赖登录。

### 2.4 E-R 图与数据库设计（核心）

<svg width="900" height="520" viewBox="0 0 900 520" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="系统核心 E-R 图">
  <defs>
    <style>
      .box { fill:#fff; stroke:#333; rx:6; }
      .title { font: 14px sans-serif; font-weight:700; }
      .field { font: 12px sans-serif; }
      .rel { stroke:#555; stroke-width:1.2; }
      .cap { font: 11px sans-serif; fill:#333; }
    </style>
  </defs>

  <!-- User -->
  <rect class="box" x="40" y="40" width="180" height="110"/>
  <text class="title" x="55" y="60">User</text>
  <text class="field" x="55" y="80">id (PK)</text>
  <text class="field" x="55" y="98">email</text>
  <text class="field" x="55" y="116">name / image</text>

  <!-- UserAction -->
  <rect class="box" x="290" y="30" width="220" height="130"/>
  <text class="title" x="305" y="50">UserAction</text>
  <text class="field" x="305" y="70">id (PK), userId (FK)</text>
  <text class="field" x="305" y="88">actionType, targetType, targetId</text>
  <text class="field" x="305" y="106">newsId (FK, optional)</text>

  <!-- News -->
  <rect class="box" x="600" y="30" width="200" height="130"/>
  <text class="title" x="615" y="50">News</text>
  <text class="field" x="615" y="70">id (PK), title</text>
  <text class="field" x="615" y="88">content, lang, published</text>
  <text class="field" x="615" y="106">viewCount</text>

  <!-- Itinerary -->
  <rect class="box" x="60" y="230" width="200" height="120"/>
  <text class="title" x="75" y="250">Itinerary</text>
  <text class="field" x="75" y="270">id (PK), title, days</text>
  <text class="field" x="75" y="288">budget, tags, isPublic</text>

  <!-- ItineraryItem -->
  <rect class="box" x="320" y="230" width="220" height="120"/>
  <text class="title" x="335" y="250">ItineraryItem</text>
  <text class="field" x="335" y="270">id (PK), itineraryId (FK)</text>
  <text class="field" x="335" y="288">attractionId (FK), day, order</text>

  <!-- Attraction -->
  <rect class="box" x="600" y="220" width="230" height="140"/>
  <text class="title" x="615" y="240">Attraction</text>
  <text class="field" x="615" y="260">id (PK), nameZh, images</text>
  <text class="field" x="615" y="278">latitude, longitude</text>
  <text class="field" x="615" y="296">ticketPrice, popularity</text>

  <!-- Relations -->
  <line class="rel" x1="220" y1="95" x2="290" y2="95"/>
  <text class="cap" x="230" y="85">1</text>
  <text class="cap" x="260" y="110">N</text>

  <line class="rel" x1="510" y1="95" x2="600" y2="95"/>
  <text class="cap" x="520" y="85">0..1</text>
  <text class="cap" x="565" y="110">N</text>

  <line class="rel" x1="260" y1="290" x2="320" y2="290"/>
  <text class="cap" x="270" y="280">1</text>
  <text class="cap" x="300" y="305">N</text>

  <line class="rel" x1="540" y1="290" x2="600" y2="290"/>
  <text class="cap" x="550" y="280">N</text>
  <text class="cap" x="585" y="305">1</text>
</svg>

图示说明：
- 以 User、Itinerary、ItineraryItem、Attraction、News 与 UserAction 为核心，体现“用户—行程—景点”的主路径与内容运营的侧路径。
- 完整字段与关系请以实际数据库 schema 为准，可在后续版本中补充 Restaurant/Accommodation 等实体细节。

---

## 3. 产品路线图（Roadmap）与迭代里程碑（含 MoSCoW / RICE）

### 3.1 路线图
- M1（第 1–3 周）：技术底座与 IA、数据模型雏形、认证、CI（Lint/测试）。
- M2（第 4–6 周）：景点/地图与检索、基础 SEO。
- M3（第 7–9 周）：行程管理与路线可视化、收藏/点赞、性能优化。
- M4（第 10–12 周）：资讯与后台、监控告警、灰度上线与试运行。
- 增强（第 13–16 周）：AI 行程草案、i18n 扩展、分享/导出。

### 3.2 MoSCoW
- Must-have：景点列表/详情与筛选、地图与附近探索、登录/注册、行程创建/编辑、路线基础可视化、资讯浏览、安全与性能基线。
- Should-have：收藏/点赞、后台内容管理、分页与搜索优化、监控与日志、SEO 优化。
- Could-have：AI 行程草案与资讯摘要、多语言扩展、社交分享。
- Won’t-have（本阶段不做）：复杂动态交通策略、深度推荐系统、重型离线包。

### 3.3 RICE（样例估算）
| 功能 | Reach（12 周） | Impact | Confidence | Effort（人周） | RICE |
|---|---:|---:|---:|---:|---:|
| 景点列表/详情+筛选 | 1,000 | 3 | 0.8 | 3 | 800 |
| 地图展示+附近探索 | 1,000 | 3 | 0.7 | 4 | 525 |
| 行程创建/编辑 | 800 | 3 | 0.7 | 4 | 420 |
| 路线可视化（基础） | 800 | 2 | 0.7 | 3 | 373 |
| 登录/注册（NextAuth） | 1,000 | 2 | 0.9 | 2 | 900 |
| 资讯发布/浏览 | 600 | 2 | 0.7 | 2 | 420 |
| 收藏/点赞 | 600 | 1 | 0.8 | 1.5 | 320 |
| 后台内容管理 | 10 | 2 | 0.7 | 3 | 47 |
| AI 行程草案（可选） | 200 | 2 | 0.5 | 2.5 | 80 |

> RICE = Reach × Impact × Confidence ÷ Effort；估算值将随数据验证调整。

---

## 4. 成功指标（跨章节）
- 质量：单元/组件测试覆盖率 ≥ 70%，关键路径 80%+。
- 体验：LCP ≤ 2.5s（P75），TTFB ≤ 500ms；前端错误率 ≤ 1%。
- 功能：完成景点/地图/行程/资讯/认证等 10+ 核心页面与流程。
- 数据：≥ 200 条结构化样本支持演示；路线基础可用。
- 稳定：试运行 2–4 周无阻塞性缺陷，SLA ≥ 99%。